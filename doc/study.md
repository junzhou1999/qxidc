# qxidc | 气象数据中心项目

## 环境

* 主机：centos7，gcc、g++内置，gdb：7.8，cmake：3.14

## 配置Cmake编译

基本忘光了，课程也已经更新了，还是学回旧的课程吧

* g++ -L -l 编译选项是针对静态库来编译的
* 使用cmake编译来跟着视频走

## 使用框架的日志类打印日志

## 将文件中的数据读取到程序内的容器

* 循环读取文件一行
* 分割内容

## 生成模拟观测数据

## 将观测数据写入文件

* 创建临时文件+写入临时文件+重命名，这样能避免写入文件时其他程序读到不完整的数据
* stat 显示文件的状态，同时加上可以选择数据文件时间的选项

## 支持生成数据格式为xml

## 支持生成数据格式为json

#### 多进程避免产生僵尸进程的方法

* 处理子进程退出SIGCHLD的信号
* 忽略子进程SIGCHLD信号
* 父进程阻塞等待子进程退出发出SIGCHLD信号，一旦有一个子进程推出，父进程wait函数就返回

## 创建服务调度程序

* 多进程，父进程先退出，子进程成为孤儿进程，由系统1号进程托管
* 多进程，子进程先退出，父进程如果没有处理对子进程发出的SIGCHLD信号，则子进程成为僵尸进程占用系统进程资源